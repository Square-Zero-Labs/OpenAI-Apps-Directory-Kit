# OpenAI Apps Directory Kit

The OpenAI Apps Directory Kit makes it easy to build an OpenAI App that serves as a specialized directory (for specialty grocery stores, or sauna locations or anything). It bundles React widgets (map, list, carousel, albums) and an MCP server that embeds those widgets directly in tool responses—no separate asset hosting required.

## What’s inside

- `src/` – React widgets and shared utilities for rendering directory data.
- `assets/` – Production bundles generated by the build step (inlined by the MCP server).
- `directory_server_node/` – Node MCP server implemented with the official TypeScript SDK.
- `build-all.mts` – Build orchestrator that emits hashed JS/CSS/HTML for each widget.

## Prerequisites

- Node.js 18+
- pnpm (or npm/yarn)

## Install

```bash
pnpm install
```

## Build the widgets

```bash
pnpm run build
```

This runs `build-all.mts`, producing versioned bundles for each widget in `assets/`. The bundles are self-contained so the server can inline the CSS/JS into every response.

For hot reload during widget development:

```bash
pnpm run dev
```

> Vite serves the widgets on `http://localhost:4044`. You can run it alongside the MCP server by starting each command in its own terminal.

To serve the current production bundles without Vite:

```bash
pnpm run build
pnpm run serve   # serves ./assets on http://localhost:4044
```

## Run the MCP server

```bash
pnpm run build        # ensure assets exist
cd directory_server_node
pnpm start
```

The server listens on `PORT` (default `8000`) and exposes four tools: `directory-map`, `directory-list`, `directory-carousel`, and `directory-albums`. Each tool response includes plain text, structured JSON data, and `_meta.openai/outputTemplate` metadata that binds the response to the inlined widget markup.

### Configuration

- `directory_server_node/config/directory.json` – UI copy, theme colors, field mapping, and optional Supabase configuration.
- `directory_server_node/data/directory-places.json` – Fallback data when remote sources are unavailable.
- Set `SUPABASE_SERVICE_ROLE_KEY` (and update the config) to pull real records from Supabase; otherwise the bundled JSON is served.

Restart the server after changing the config or data files.

## Testing in ChatGPT developer mode

1. Enable developer mode and add a custom connector in ChatGPT.
2. Point the connector at your MCP server (for example, `https://<your-ngrok-subdomain>.ngrok-free.app/mcp`).
3. Invoke one of the directory tools; ChatGPT will render the widgets using the embedded assets and structured content.
